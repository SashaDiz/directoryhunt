# Project Context for AI Assistants

This file provides structured context for AI assistants to better understand and work with the DirectoryHunt project.

## Project Overview

**Name**: DirectoryHunt  
**Type**: Product Hunt-like directory platform  
**Architecture**: Full-stack React application with serverless backend  
**Database**: MongoDB with Zod validation  
**Authentication**: Clerk with OAuth providers

## Key Business Logic

### Core Entities

1. **Users** - Authenticated via Clerk, can submit and vote on apps
2. **Apps** - Product submissions with launch scheduling and voting
3. **Categories** - Organizational taxonomy for apps
4. **Launch Weeks** - Time-based organization system
5. **Votes** - User engagement tracking

### Workflows

1. **App Submission**: User submits → Pending review → Approved → Live
2. **Launch Scheduling**: Apps assigned to specific weeks → Community voting → Ranking
3. **User Journey**: Sign up → Browse apps → Submit apps → Vote → Manage profile

## Technical Architecture

### Frontend (`src/`)

```
components/
├── ui/           # Base Radix UI components with Tailwind
├── auth/         # Clerk authentication wrappers
├── forms/        # Form components with React Hook Form
└── layout/       # Header, Footer, navigation

pages/            # Route-level components
hooks/            # Custom React hooks for API calls
lib/              # Utilities, constants, helpers
contexts/         # React context providers
```

### Backend (`api/`)

```
apps/             # CRUD operations for applications
categories/       # Category management
dashboard/        # User analytics and stats
profile/          # User profile management
submit-directory/ # App submission workflow
user/             # User data operations
webhooks/         # External service integrations
weeks/            # Launch week management
```

### Database Schema Relationships

```
User (1) ──→ (N) Apps         [submitted_by]
User (N) ──→ (N) Apps         [through Votes]
Apps (N) ──→ (N) Categories   [categories array]
Apps (N) ──→ (1) LaunchWeek   [launch_week]
```

## Common Patterns

### API Endpoint Pattern

```javascript
export default async function handler(req, res) {
  // 1. Method validation
  // 2. Authentication check (Clerk user ID)
  // 3. Input validation (Zod schema)
  // 4. Business logic
  // 5. Standardized response
}
```

### Component Pattern

```jsx
function Component({ prop1, prop2 }) {
  // 1. Hooks (state, effects, custom hooks)
  // 2. Event handlers
  // 3. Early returns for loading/error states
  // 4. JSX with Tailwind classes
}
```

### Database Service Pattern

```javascript
export class EntityService {
  static async create(data) {
    /* validation + insert */
  }
  static async findById(id) {
    /* find by ObjectId */
  }
  static async update(id, data) {
    /* validation + update */
  }
  static async delete(id) {
    /* soft delete preferred */
  }
}
```

## Key Configuration Files

- `package.json` - Dependencies and scripts
- `vite.config.js` - Build configuration with path aliases
- `tailwind.config.js` - Design system configuration
- `vercel.json` - Deployment and routing configuration
- `.env` - Environment variables (never commit)

## Environment Variables

### Required for Development

```
MONGODB_URI=mongodb://localhost:27017/directoryhunt
VITE_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
```

### Optional Services

```
RESEND_API_KEY=re_...          # Email service
GOOGLE_CLIENT_ID=...           # OAuth
GITHUB_CLIENT_ID=...           # OAuth
```

## Common Tasks & Solutions

### When User Asks About...

#### **Authentication Issues**

- Check Clerk configuration in `.env`
- Verify `x-clerk-user-id` header in API calls
- Reference `src/components/auth/ProtectedRoute.jsx`

#### **Database Operations**

- Use service classes in `libs/models/services.js`
- Validate with schemas in `libs/models/schemas.js`
- Check indexes in `scripts/init-database.js`

#### **API Development**

- Follow pattern in existing `api/` endpoints
- Use Zod for validation
- Return consistent response format

#### **UI Components**

- Base components in `src/components/ui/`
- Use Radix UI + Tailwind CSS pattern
- Reference existing components for patterns

#### **Deployment Issues**

- Vercel is primary platform
- Check `vercel.json` configuration
- Ensure environment variables are set

## Troubleshooting Quick Reference

### Common Error Patterns

```
"Method not allowed" → Check HTTP method in API handler
"Authentication required" → Missing Clerk user ID header
"Validation failed" → Zod schema validation error
"MongoDB connection" → Check MONGODB_URI environment variable
```

### Development Commands

```bash
npm run dev        # Start development server
npm run build      # Build for production
npm run db:init    # Initialize database
npm run lint       # Run ESLint
```

## Best Practices for AI Assistance

### When Suggesting Code Changes

1. **Read existing files first** to understand current patterns
2. **Use established patterns** from the codebase
3. **Follow Zod validation** for data handling
4. **Maintain consistent styling** with Tailwind classes
5. **Consider authentication** for protected operations

### When Debugging Issues

1. **Check environment variables** first
2. **Verify database connection** for data issues
3. **Look at browser console** for frontend errors
4. **Check API response format** for backend issues
5. **Reference existing working examples**

### When Adding Features

1. **Start with database schema** if data is involved
2. **Create service methods** for business logic
3. **Add API endpoints** following existing patterns
4. **Build UI components** using design system
5. **Add proper error handling** and validation

## File Change Impact Analysis

### High Impact Files (require careful changes)

- `libs/models/schemas.js` - Affects all data validation
- `libs/mongodb.js` - Affects all database operations
- `src/App.jsx` - Affects routing and layout
- `api/webhooks/clerk.js` - Affects user synchronization

### Medium Impact Files

- `src/components/ui/*` - Affects visual consistency
- `api/*/route.js` - Affects specific API functionality
- `tailwind.config.js` - Affects styling system

### Low Impact Files

- Individual page components
- Utility functions
- Documentation files

This context should help you provide more accurate and project-specific assistance!
